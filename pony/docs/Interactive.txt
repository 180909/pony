Играем с Пони в интерактивном режиме
====================================

Язык Питон позволяет работать в двух режимах: можно писать обычную программу,
а можно просто набирать команды в командной строке и сразу же видеть результаты
их выполнения (это называется "интерактивный режим"). Пони может работать
в любом из этих режимов.

Конечно, никто не будет запускать в интерактивном режиме настоящее большое
веб-приложение, но на первых порах, пока мы только изучаем возможности Пони,
нам будет удобно использовать интерактивный режим, потому что при выполнении любой
команды мы сразу сможем увидеть ее результаты.

Для того, чтобы играть с Пони в интерактивном режиме, нужно ее сначала
импортировать, то есть загрузить в память. Это можно сделать следующей командой:

    >>> from pony.main import *

Если при выполнении этой команды возникла ошибка, значит что Вы еще
не установили Пони как следует. Тогда вернитесь к предыдущему разделу
документации и выполните установку Пони.

> **Вопрос:** *Я слышал, что в Питоне не рекомендуется импортировать из
модуля с помощью "звездочки", так как при этом загружается слишком много
имен и может возникнуть путаница*

> **Ответ:** Модуль [`pony.main`](pony.main) *специально* предназначен для того,
чтобы импортировать из него "звездочкой". При этом импортируется небольшое
количество специально подобранных классов и функций, которые нужны
практически в любой программе, использующей Пони. Полный перечень
импортируемых объектов можно посмотреть [здесь](pony.main). В принципе,
использовать [`pony.main`](pony.main) необязательно, вместо этого вы можете вручную
импортировать необходимые объекты напрямую из тех модулей, где они описываются
(хотя на наш взгляд, использовать [`pony.main`](pony.main) гораздо удобнее).

Следующее действие, которое надо совершить - это запустить веб-сервер,
чтобы он принимал входящие HTTP-запросы, и перенаправлял их нашей программе.
В качестве такого веб-сервера можно использовать, например, [Apache](Apache),
но для начала проще всего использовать встроенный веб-сервер [CherryPy](CherryPy),
написанный на Питоне и входящий в состав самой Пони.

Чтобы запустить веб-сервер CherryPy, нам необходимо выполнить команду:

    >>> http.start()
    Starting HTTP server at localhost:8080
    >>>

После выпонения этой команды веб-сервер написал, что он успешно стартовал
по адресу localhost используя порт 8080. При желании функция
[`http.start`](pony.web.http.start) позволяет указать другое имя сервера
и номер порта.
    
> **Вопрос**: *Как же мы можем дальше работать в интерактивном режиме,
если теперь запущен веб-сервер?*

> **Ответ:** Веб-сервер запускается в отдельном потоке, поэтому нам не мешает.

Теперь мы должны создать на сайте страницу. Пони предполагает, что страница
должна генерироваться питоновской функцией (программа может содержать также
статические страницы, хранящиеся в файле, но в интерактивном режиме мы их
делать не будем). Чтобы функция выполняла роль страницы сайта, перед ней
необходимо поставить декоратор [`@http`](pony.web.http):

    >>> @http
    ... def hello():
    ...     return "Hello, world!"
    ... 
    >>> 

Теперь мы можем зайти на сайт и посмотреть, что получилось. Поскольку
в декораторе [`@http`](pony.web.http) мы не задали имя страницы на сайте,
то по умолчанию предполагается, что он называется так же, как и функция,
то есть "hello".

Попробуем зайти на сайт по адресу <http://localhost:8080/hello>.
Мы должны увидеть страницу, на которой написан текст: `Hello, world!`
Если это получилось, то поздравляем - вы написали свою простейшую
работающую программу на Пони!
