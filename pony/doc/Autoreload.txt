Автоматическая перезагрузка
===========================


При старте веб-приложения исполняемые файлы считываются с диска и запускаются в памяти компьютера.
Если разработчик вносит в приложение какие-то изменения, нужно перезапустить приложение, чтобы изменения вступили в силу.

Если приложение находится в стадии разработки, то изменения вносятся постоянно.
Перезапуск приложения каждый раз становится неудобным и отнимает время.

Пони позволяет осуществлять автоматическую перезагрузку файлов приложения при их изменении.
Для этого служит функция use_autoreload()

Чтобы включить автоматическую перезагрузку нужно добавить строку

    use_autoreload()

после всех импортов в главном модуле веб-приложения.
Например:

    from pony.main import *

    use_autoreload()

    @http
    def page1():
        return "Hello, world!"
    
Теперь Пони будет следить за файлами приложения. Если содержимое хоть одного из них меняется, Пони перезагружает
все файлы приложения.

На данный момент автоматическая перезагрузка средствами Пони поддерживается при использовании веб-сервера CherryPy и модуля flup.
Если Пони используется из mod_wsgi или GAE, то они сами отвечают за перезагрузку. 




### Технические особенности автоматической перезагрузки

При старте Пони разделяет модули на 2 части - "системный" и "пользовательские".
Системные модули не перегружаются, даже если в них произошли изменения.
Пони отслеживает изменения только в "пользовательских" модулях.

Системные модули не должны содержать ссылок на "пользовательские" модули.
При наличии таких ссылок объекты из старого модуля могут оставаться в памяти до полной перезагрузки приложения.
При перезагрузке происходит одновременная перезагрузка "пользовательских" модулей.
Системные модули при этом не трогаются.

### Декоратор @on_reload

Если функция декорирована с помощью @on_reload, она будет вызвана в момент срабатывания автоматической перезагрузки
пользовательских модулей.

-------------
если написать from pony.main import *
то константа USE_AUTORELOAD попадет в модуль

нужно либо импортировать
либо написать USE_AUTORELOAD = True

перезагружается не процесс
процесс остается
модули только перегружа.тся

---------------
как запускать файл
пони secrets
pony log
запускается не как в джанго - какая то среда, которой нужно скормить файлик
а сам файлик - и все, пони запущена
