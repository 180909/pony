Отладка программ
================

Может случиться ситуация, когда веб приложение ведет себя совсем не так, как предполагал разработчик.
В этом случае, для того, чтобы разобраться в чем дело может помочь пошаговое выполнение
написанного кода. Этот процесс называется отладкой.

Чтобы дать понять Пони, что мы хотим перейти в режим отладки и наблюдать процесс
построения страницы, нужно задать параметр `debug` в URL.

Давайте рассмотрим процесс отладки на примере.
Запустим приведенный ниже код:

    from pony.main import *
    
    @http
    def page():
        a = 1
        b = 2
        c = a + b
        return html("result: c=$c")

    http.start()

Если мы введем адрес http://localhost:8080/page в браузере, то увидим сгенерированную страницу:

    __картинка__обычная страница

Давайте теперь посмотрим на генерацию этой страницы в режиме отладки.
Для этого нам нужно открыть тот же самый URL, только добавить параметр "debug" в URL.


    __картинка__первый экран Debugging
    
На этой странице содержится много информации. Давайте разберемся по порядку.
Первой строчкой Пони сообщает разработчику что он находится в режиме отладки.
Затем идет панель управления процессом отладки:

    step - выполнить текущую строку, остановиться на следующей строке.
            Если текущая строка содержит вызов функции, то остановиться на первой
            строке внутри вызванной функции

    next - выполнить текущую строку и остановиться на следующей строке в этой же
            функции. Если текущая строка содержит вызов функции, то этот вызов
            выполнится полностью, в отличие от предыдущей команды
            
    return - выполнить до конца функцию, в которой находится курсор.
            Если это основная функция-обработчик, то эта команда приведет
            к отображению генерируемой страницы
            
    cont - продолжить выполнение до конца и отобразить генерируемую страницу
    
Далее идет информация о текущем положении точки остановки - модуль, номер строки и
имя функции.
Затем отображается фрагмент функции с пронумерованными строками и положение
в ней текущей строки, в которой выполнение приостановлено.
Текущая строка подсвечивается красным и сразу после номера строки стоит символ ">"
Внизу страницы располагается поле, в котором можно написать выражение
и вычислить используя текущие значения переменных.
Если разработчику нужно узнать значение той или иной переменной, можно навести
курсор мышки на переменную и увидеть значение в виде всплывающей подсказки.

Если во время вычисления заданного разработчиком выражения произошел экспешн,
на странице отобразится Traceback

    __картинка__с Трейсбэк

Возможность перейти в режим отладки полезна только на этапе разработки веб-сайта.
Когда сайт запускается в работу эту возможность следует отключить.
Для этого нужно отредактировать файл pony/options.py.
Для параметра `DEBUG` следует задать значение False.
Полный перечень параметров, которые можно задать в файле настроек pony/options.py
можно посмотреть [здесь](Options.txt)